# Pre-Update Issue List (v1.00)

1. **Backend · Critical · JWT verification accepts any shared-secret token after a verification failure, enabling cross-environment impersonation and bypassing issuer/audience enforcement.** (`backend-nodejs/src/services/sessionService.js`)
2. **Backend · High · Core routers mount duplicated modules and remap `v1` to `/`, producing unpredictable middleware order and bypassing versioned API contracts.** (`backend-nodejs/src/routes/index.js`)
3. **Backend · Critical · Default CORS policy reflects every origin while allowing credentials, creating a cross-origin session fixation vector.** (`backend-nodejs/src/app.js`)
4. **Backend · High · Secrets loading, PII assertions, and job schedulers execute during import, so missing env vars or transient AWS outages crash the process before logging and spawn duplicate jobs.** (`backend-nodejs/src/config/index.js`, `backend-nodejs/src/app.js`, `backend-nodejs/src/jobs/index.js`, `backend-nodejs/src/server.js`)
5. **Backend · High · Browser and mobile crash telemetry 404 because `/telemetry/client-errors` and `/telemetry/mobile-crashes` handlers are absent, leaving operators blind.** (`backend-nodejs/src/routes/telemetryRoutes.js`)
6. **Backend · Medium · Rate limiting omits `Retry-After` headers and its custom `keyGenerator` throws when the configured IP header is missing, amplifying denial-of-service scenarios.** (`backend-nodejs/src/app.js`)
7. **Backend · Medium · Server bootstraps listeners at module load and always calls `process.exit` on shutdown, preventing tests and orchestrators from managing lifecycle.** (`backend-nodejs/src/server.js`)
8. **Backend · Medium · Helmet ships with CSP/COEP disabled and secrets bootstrap logs stack traces, expanding exposure to script injection and credential leakage.** (`backend-nodejs/src/app.js`, `backend-nodejs/src/config/index.js`)
9. **Backend · Medium · Authentication middleware returns twice for missing-token storefront requests, suppressing contextual guidance and confusing legitimate users.** (`backend-nodejs/src/middleware/auth.js`)
10. **Backend · High · Readiness probes attempt to `CREATE EXTENSION` for PostGIS on every boot, so managed Postgres tiers without superuser rights fail permanently.** (`backend-nodejs/src/app.js`)
11. **Backend · Low · Configuration generator duplicates `finance.commissionRates`, silently overwriting manual edits and masking drift.** (`backend-nodejs/src/config/index.js`)
12. **Backend · Medium · Database health checks discard stack traces and timing details, depriving incident responders of root-cause diagnostics.** (`backend-nodejs/src/app.js`)
13. **Database · Critical · Finance and communications migrations run as monolithic, non-transactional batches with destructive cascades that can erase ledger history on user/order deletion.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
14. **Database · High · Webhook and notification tables lack idempotency/uniqueness keys and provider indexes, allowing duplicate events and forcing table scans during retries.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250330001000-create-customer-notification-recipients.js`)
15. **Database · High · Migrations assume PostGIS superuser privileges and drop enums without guards, so rollbacks and privilege-constrained deployments fail.** (`backend-nodejs/src/app.js`, `backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`)
16. **Database · Medium · Seed data uses `randomUUID()` and enforces single communications configurations per tenant, preventing deterministic replays and multi-region rollout.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
17. **Database · Medium · Amount columns and ledger metadata lack CHECK constraints, enabling negative or malformed financial records to persist.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`)
18. **Database · Medium · Payment metadata and webhook payloads persist sensitive JSONB indefinitely without retention or encryption hooks, risking compliance breaches.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`)
19. **Database · Medium · Payout requests and webhook events omit provider-specific indexes, degrading performance for dashboards and retry workers.** (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`)
20. **Database · Medium · Communications escalation stores `allowed_roles` as unvalidated JSON with no audit metadata, allowing silent privilege drift.** (`backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
21. **Dependencies · Critical · `backend-nodejs/package.json` is malformed with duplicate keys, preventing npm installs and hiding true dependency drift.** (`backend-nodejs/package.json`)
22. **Dependencies · High · Front-end pulls incompatible geospatial stack (MapLibre 5 + Mapbox Draw 1.5 + redundant Turf bundles) and experimental React/Vite upgrades without governance.** (`frontend-reactjs/package.json`)
23. **Dependencies · High · Backend relies on ESM-only `dotenv@17` without migrating CommonJS loaders, breaking scripts that expect `require('dotenv')`.** (`backend-nodejs/package.json`)
24. **Dependencies · Medium · Native `sqlite3` test dependency and beta `bcrypt@6` require platform toolchains and risk ABI instability in CI.** (`backend-nodejs/package.json`)
25. **Dependencies · Medium · `@aws-sdk/client-secrets-manager@3.585.0` requires Node 18+, yet runtime baselines remain unspecified, leading to production drift.** (`backend-nodejs/package.json`)
26. **Dependencies · Medium · Flutter lockfiles are manually edited and add biometric plugins requiring elevated Android SDKs, so builds are non-deterministic for new contributors.** (`flutter-phoneapp/pubspec.yaml`, `flutter-phoneapp/pubspec.lock`)
27. **Dependencies · Medium · None of the projects declare `engines`/SDK ranges or enforce lockfile validation, so CI cannot block unsupported runtimes.** (`backend-nodejs/package.json`, `frontend-reactjs/package.json`, `flutter-phoneapp/pubspec.yaml`)
28. **Dependencies · Medium · Security audit tooling and load-test scripts assume global binaries (`k6`) and are not wired into CI, letting risky packages merge unnoticed.** (`scripts/security-audit.mjs`, `scripts/run-load-tests.mjs`, `backend-nodejs/package.json`)
29. **Front-end · Critical · Session bootstrap trusts `localStorage` stubs, never revalidates `/api/auth/me`, and lets persona unlocks self-provision admin dashboards.** (`frontend-reactjs/src/hooks/useSession.js`, `frontend-reactjs/src/pages/DashboardHub.jsx`)
30. **Front-end · High · A single `Suspense` boundary wraps more than seventy lazy routes, so any import failure blanks the entire app.** (`frontend-reactjs/src/App.jsx`)
31. **Front-end · High · Provider dashboards remain publicly reachable; `ProviderProtectedRoute` blocks with static copy instead of redirecting to onboarding or logging incidents.** (`frontend-reactjs/src/App.jsx`, `frontend-reactjs/src/components/auth/ProviderProtectedRoute.jsx`)
32. **Front-end · High · Error boundaries leak stack traces and URLs while telemetry posts to dead endpoints, exposing internals yet capturing no diagnostics.** (`frontend-reactjs/src/components/error/AppErrorBoundary.jsx`, `frontend-reactjs/src/components/error/RouteErrorBoundary.jsx`, `frontend-reactjs/src/utils/errorReporting.js`, `backend-nodejs/src/routes/telemetryRoutes.js`)
33. **Front-end · Medium · Authenticated layouts drop legal/help footers and mount heavy chat/analytics widgets for all personas, hurting compliance and performance.** (`frontend-reactjs/src/App.jsx`)
34. **Front-end · Medium · Localization failures render blank denial screens and corrupted storage loops indefinitely because recovery flows are missing.** (`frontend-reactjs/src/components/auth/ProviderProtectedRoute.jsx`, `frontend-reactjs/src/hooks/useSession.js`)
35. **Front-end · Medium · Persona access utilities spam synchronous `localStorage` writes and lack telemetry, making abuse and performance regressions invisible.** (`frontend-reactjs/src/hooks/usePersonaAccess.js`, `frontend-reactjs/src/hooks/useSession.js`)
36. **User App · Critical · Flutter build lacks a credentialed login path and still depends on demo tokens stored like production credentials.** (`flutter-phoneapp/lib/features/auth/presentation/auth_gate.dart`, `flutter-phoneapp/lib/features/auth/data/auth_token_store.dart`, `flutter-phoneapp/lib/app/bootstrap.dart`)
37. **User App · High · Bootstrap blocks on sequential secure storage/biometric setup and crashes when plugins fail, producing long blank screens at launch.** (`flutter-phoneapp/lib/app/bootstrap.dart`)
38. **User App · High · Crash diagnostics hardcode version metadata, reuse a single HTTP client, and fire `unawaited` uploads to a missing endpoint, losing production telemetry.** (`flutter-phoneapp/lib/core/diagnostics/app_diagnostics_reporter.dart`, `flutter-phoneapp/lib/main.dart`, `backend-nodejs/src/routes/telemetryRoutes.js`)
39. **User App · Medium · Token refresh logic swallows errors and fails to signal re-authentication, so expired sessions persist silently.** (`flutter-phoneapp/lib/features/auth/application/auth_token_controller.dart`)
40. **User App · Medium · API client lacks retry/backoff and pagination helpers, so transient backend failures become fatal user-facing errors.** (`flutter-phoneapp/lib/core/network/api_client.dart`)
41. **User App · Medium · Environment selection is compile-time only; switching between staging and production requires rebuilding the app.** (`flutter-phoneapp/lib/core/config/app_config.dart`, `flutter-phoneapp/lib/app/bootstrap.dart`)
42. **User App · Medium · Project defines no integration or golden tests, leaving core flows without regression coverage.** (`flutter-phoneapp/pubspec.yaml`)
43. **Cross-Cutting · High · Background jobs, migrations, and offline fallbacks run by default without feature flags, complicating blue/green deployments and demo builds.** (`backend-nodejs/src/jobs/index.js`, `backend-nodejs/src/database/migrations`, `frontend-reactjs/src/hooks/useSession.js`)
44. **Cross-Cutting · Medium · Platform telemetry lacks structured logs and correlation IDs across services, blocking effective incident reconstruction.** (`backend-nodejs/src/app.js`, `frontend-reactjs/src/utils/errorReporting.js`, `flutter-phoneapp/lib/core/diagnostics/app_diagnostics_reporter.dart`)
45. **Cross-Cutting · Medium · Runtime prerequisites (Node 18+, Android SDK 23+) and native toolchain steps are undocumented, slowing onboarding and increasing build failures.** (`backend-nodejs/package.json`, `frontend-reactjs/package.json`, `flutter-phoneapp/pubspec.yaml`)
