# Pre-Update Issue List (v1.00)

1. **[Critical][Backend] JWT verification accepts forged tokens** — `verifyAccessToken` falls back to `decode` for any verification error, so any token signed with the shared secret bypasses issuer, audience, and expiry checks. (`backend-nodejs/src/services/sessionService.js`)
2. **[Critical][Front-end] Client-side persona escalation** — `DashboardHub` and `usePersonaAccess` unlock privileged dashboards by mutating `localStorage`, letting unauthenticated users self-provision enterprise access. (`frontend-reactjs/src/pages/DashboardHub.jsx`, `frontend-reactjs/src/hooks/usePersonaAccess.js`)
3. **[Critical][User App] No production login or refresh flow** — `AuthGate` only supports demo bootstrap tokens and `AuthTokenController.ensureFreshness` suppresses refresh failures, so real users cannot authenticate or recover sessions. (`flutter-phoneapp/lib/features/auth/presentation/auth_gate.dart`, `flutter-phoneapp/lib/features/auth/application/auth_token_controller.dart`)
4. **[Critical][Database] Non-transactional finance + communications migration** — The combined migrations execute large DDL batches without wrapping in transactions, seeding partial schemas and dangling enums on failure. (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
5. **[Critical][Dependencies] Backend manifest is invalid JSON** — Duplicate keys and missing commas in `backend-nodejs/package.json` prevent dependency installation, blocking all builds. (`backend-nodejs/package.json`)
6. **[Critical][Cross-Cutting] Telemetry ingestion endpoints missing** — Clients post crash/error reports to `/telemetry/client-errors` and `/telemetry/mobile-crashes`, but the backend router never implements them, so diagnostics 404. (`backend-nodejs/src/routes/telemetryRoutes.js`, `frontend-reactjs/src/utils/errorReporting.js`, `flutter-phoneapp/lib/core/diagnostics/app_diagnostics_reporter.dart`)
7. **[Critical][Security] Wildcard CORS with credentials** — `app.js` reflects any origin while enabling credentials, enabling cross-origin session fixation and data exfiltration. (`backend-nodejs/src/app.js`)
8. **[Critical][Backend] Readiness bootstraps try to create PostGIS extensions** — `initDatabase()` attempts `CREATE EXTENSION postgis` regardless of role privileges, causing boot loops for non-superuser deployments. (`backend-nodejs/src/app.js`)
9. **[High][Backend] Router duplication and auto-booted server** — Aggregated router mounts the same modules multiple times and `server.js` starts listening on import, breaking middleware guarantees and blue/green rollout safety. (`backend-nodejs/src/routes/index.js`, `backend-nodejs/src/server.js`)
10. **[High][Backend] Secrets loading crashes at module import** — `loadSecretsIntoEnv` runs synchronously with no retry/logging, so transient AWS failures crash boot and leak stack traces. (`backend-nodejs/src/config/index.js`)
11. **[High][Backend] Rate limiter and impersonation guards unstable** — The custom rate-limit key generator throws when headers are missing, throttles omit `Retry-After`, and `authenticate` returns twice, hiding correct failure messaging. (`backend-nodejs/src/app.js`, `backend-nodejs/src/middleware/auth.js`)
12. **[High][Database] Destructive cascades and missing constraints** — Finance tables cascade deletes to upstream entities, omit positive amount/currency checks, and lack idempotency keys, risking ledger loss and duplicate webhook processing. (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`)
13. **[High][Database] Communications settings lack multi-tenant safety** — `tenant_id` is forced unique, JSON (`allowed_roles`, metadata) is unvalidated, and actor attribution is absent, inviting corruption and privilege drift. (`backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
14. **[High][Front-end] Sessions never revalidate** — The React session hook trusts cached storage forever, tolerates corrupted JSON, and exposes raw stack traces, undermining UX and security. (`frontend-reactjs/src/hooks/useSession.js`, `frontend-reactjs/src/components/error/AppErrorBoundary.jsx`)
15. **[High][Front-end] Error boundaries leak implementation details** — `AppErrorBoundary` and `RouteErrorBoundary` render raw stack traces to users while reporting to dead telemetry endpoints. (`frontend-reactjs/src/components/error/AppErrorBoundary.jsx`, `frontend-reactjs/src/components/error/RouteErrorBoundary.jsx`, `frontend-reactjs/src/utils/errorReporting.js`)
16. **[High][Mobile] Crash reporting misconfigured** — Diagnostics hardcode `appVersion: '1.50'`, send over HTTP, log verbose traces in release, and fire uploads via `unawaited`, so crashes vanish. (`flutter-phoneapp/lib/core/diagnostics/app_diagnostics_reporter.dart`, `flutter-phoneapp/lib/main.dart`)
17. **[High][Mobile] Demo credentials stored like production tokens** — `AuthTokenStore` persists demo bootstrap tokens with production lifetimes and no indicator of degraded security. (`flutter-phoneapp/lib/features/auth/data/auth_token_store.dart`)
18. **[High][Tooling] Lockfile/process governance absent** — Flutter lockfile is hand-edited, npm/yarn installs are unchecked, and CI lacks lockfile or dependency audit gates, enabling drift and insecure upgrades. (`frontend-reactjs/package.json`, `flutter-phoneapp/pubspec.lock`, `scripts/security-audit.mjs`)
19. **[High][Dependencies] Runtime compatibility misaligned** — Backend dependencies (AWS SDK v3, dotenv ESM) require Node 18+ and ES modules while tooling and scripts still assume Node 16/CommonJS. (`backend-nodejs/package.json`, `scripts/run-load-tests.mjs`)
20. **[High][Backend] Background jobs and rate limiting unstable** — Jobs start in every pod without coordination, rate limiting omits `Retry-After`, and shutdowns end with `process.exit`, increasing downtime risk. (`backend-nodejs/src/jobs/index.js`, `backend-nodejs/src/app.js`, `backend-nodejs/src/server.js`)
21. **[High][Front-end] Monolithic routing degrades resilience** — A single Suspense boundary wraps 70+ lazy routes, so one failed import blanks the app and inflates bundle size. (`frontend-reactjs/src/App.jsx`)
22. **[Medium][Database] Index and audit coverage insufficient** — Key tables (`payout_requests`, `finance_webhook_events`, communications entry points) lack provider/status indexes and `created_by`/`updated_by` fields, impeding performance and traceability. (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
23. **[Medium][Database] Bootstrap data is non-deterministic** — Migrations seed `randomUUID()` values and large JSON blobs without documentation, guaranteeing environment drift and fragile QA. (`backend-nodejs/src/database/migrations/20250325000000-payments-orchestration.js`, `backend-nodejs/src/database/migrations/20250327000000-create-communications-inbox-settings.js`)
24. **[Medium][Mobile] Bootstrap blocks UI rendering** — Startup serially initialises secure storage, SharedPreferences, and biometrics before showing a splash, leaving users on a blank screen and increasing crash risk. (`flutter-phoneapp/lib/app/bootstrap.dart`)
25. **[Medium][Mobile] Navigation keeps every tab alive** — `AppShell` uses `IndexedStack` and never remembers the last destination, causing needless rebuilds and network calls. (`flutter-phoneapp/lib/app/app.dart`)
26. **[Medium][Front-end] Global widgets always load** — Heavy components like `FloatingChatLauncher` and analytics panels mount for every persona, adding network chatter and hurting initial paint. (`frontend-reactjs/src/App.jsx`)
27. **[Medium][Front-end] Provider onboarding lacks remediation** — `ProviderProtectedRoute` denies access without redirecting to onboarding flows or surfacing contact guidance. (`frontend-reactjs/src/components/auth/ProviderProtectedRoute.jsx`)
28. **[Medium][Dependencies] Geospatial bundle bloat and incompatibility** — React dashboard ships MapLibre, Mapbox Draw, and duplicate Turf packages despite lacking map features, inflating bundles and risking runtime clashes. (`frontend-reactjs/package.json`)
29. **[Medium][Tooling] Load-test script assumes global binaries** — `scripts/run-load-tests.mjs` shells out to `k6` without detecting availability, so developer machines fail unpredictably. (`scripts/run-load-tests.mjs`)
30. **[Medium][Governance] Roadmap scope misaligned** — The release bundles massive finance/provider expansions even though evaluations emphasise authentication and booking stability, stretching teams beyond capacity. (`backend-nodejs/src/routes/index.js`, `frontend-reactjs/src/App.jsx`, `flutter-phoneapp/lib/app/app.dart`)

*Severity legend: Critical (release blocker), High (must fix pre-release), Medium (address immediately after blockers), Low (track post-release only).*
