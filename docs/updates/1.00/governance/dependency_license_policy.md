# Dependency License & Load-Test Governance (Version 1.00)

## Policy overview
- `governance/license-policy.json` enumerates the SPDX licenses approved for Fixnado distribution, the families that require legal review, and the licenses we block outright. Proprietary modules that we ship ourselves are whitelisted explicitly through keyed overrides for each workspace build.【F:governance/license-policy.json†L1-L36】
- The Flutter companion now depends on `dart_pubspec_licenses` and ships a deterministic `tooling/license_snapshot.dart` helper that fingerprints every hosted package so we can map unlabelled license texts back to SPDX identifiers before enforcement.【F:flutter-phoneapp/pubspec.yaml†L22-L29】【F:flutter-phoneapp/tooling/license_snapshot.dart†L1-L116】
- License heuristics normalise common variants (MIT, Apache-2.0, BSD 2/3-Clause, ISC, Zlib, CC0) and fall back to explicit review for GNU family copyleft, SEE-LICENSE markers, or packages that omit metadata entirely, ensuring legal sees every non-standard grant before a release train leaves staging.【F:flutter-phoneapp/tooling/license_snapshot.dart†L11-L77】【F:governance/license-policy.json†L7-L24】

## Automated release gates
- The `Security scanning` job now installs workspace dependencies, resolves Flutter packages, and runs `node scripts/license-scan.mjs --ci`, which stitches npm manifests together with the Flutter license snapshot to halt the pipeline if any forbidden or review-classified packages appear.【F:.github/workflows/build-test-and-scan.yml†L73-L118】【F:scripts/license-scan.mjs†L1-L243】
- `scripts/license-scan.mjs` supports machine-readable reporting (`--report`) and honours override decisions so compliance can track exceptions alongside policy text. When invoked in CI mode it fails fast for any package that still needs legal sign-off, preventing drift between manual approvals and automation.【F:scripts/license-scan.mjs†L18-L243】
- The same job provisions k6 via `grafana/setup-k6-action` and executes `node scripts/run-load-tests.mjs --validate-only`, which inspects the performance harness, validates scenario definitions, and prints the required environment keys without firing HTTP traffic—perfect for ensuring release candidates keep the load harness healthy before manual drills.【F:.github/workflows/build-test-and-scan.yml†L118-L132】【F:scripts/run-load-tests.mjs†L1-L139】

## Operational process
- For full-load rehearsals, run `node scripts/run-load-tests.mjs --profile performance/profiles/baseline.json --summary performance/reports/baseline.json` after exporting production-like credentials. The command now validates profile structure up front and aborts with actionable guidance if unsupported scenarios or malformed settings slip into the JSON profile.【F:scripts/run-load-tests.mjs†L1-L181】
- Engineering or legal can regenerate Flutter license evidence via `dart run tooling/license_snapshot.dart build/license_audit.json` (the CI job deletes its scratch file). Archive the generated JSON in the evidence vault for each release branch together with the machine-readable output from `scripts/license-scan.mjs --report reports/license/v1.00.json` so audit trails contain the exact dependency posture approved for launch.【F:flutter-phoneapp/tooling/license_snapshot.dart†L79-L114】【F:scripts/license-scan.mjs†L194-L217】
- When `scripts/license-scan.mjs` surfaces review-required packages locally, update `governance/license-policy.json` only after legal approval and attach the signed decision ID inside the override `reason`. This keeps CI, change logs, and governance documentation perfectly aligned for Version 1.00 and downstream minor releases.【F:scripts/license-scan.mjs†L150-L187】【F:governance/license-policy.json†L25-L36】
